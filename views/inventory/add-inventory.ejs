<%- include('../partials/head', { title: 'Add Inventory' }) %>
<body>
 
  <main class="container">
    <h1>Add New Inventory</h1>
    
    <% if (errors && errors.length > 0) { %>
      <div class="alert alert-danger">
        <ul>
          <% errors.forEach(error => { %>
            <li><%= error.msg %></li>
          <% }); %>
        </ul>
      </div>
    <% } %>
    
    <% if (flashMessages && flashMessages.error) { %>
      <div class="alert alert-danger">
        <%= flashMessages.error %>
      </div>
    <% } %>

    <form action="/inv/add-inventory" method="POST" novalidate>
      <!-- Classification Dropdown -->
      <div class="form-group">
        <label for="classification_id">Classification*</label>
        <%- classificationList %>
        <% if (errors && errors.some(e => e.param === 'classification_id')) { %>
          <div class="invalid-feedback d-block">
            <% errors.filter(e => e.param === 'classification_id').forEach(error => { %>
              <%= error.msg %>
            <% }); %>
          </div>
        <% } %>
      </div>
      
      <!-- Make -->
      <div class="form-group">
        <label for="inv_make">Make*</label>
        <input type="text" 
               id="inv_make" 
               name="inv_make" 
               class="form-control <%= errors && errors.some(e => e.param === 'inv_make') ? 'is-invalid' : '' %>"
               value="<%= typeof inv_make !== 'undefined' ? inv_make : '' %>"
               required>
      </div>
      
      <!-- Model -->
      <div class="form-group">
        <label for="inv_model">Model*</label>
        <input type="text" 
               id="inv_model" 
               name="inv_model" 
               class="form-control <%= errors && errors.some(e => e.param === 'inv_model') ? 'is-invalid' : '' %>"
               value="<%= typeof inv_model !== 'undefined' ? inv_model : '' %>"
               required>
      </div>
      
      <!-- Year -->
      <div class="form-group">
        <label for="inv_year">Year*</label>
        <input type="number" 
               id="inv_year" 
               name="inv_year" 
               min="1900" 
               max="<%= new Date().getFullYear() + 1 %>"
               class="form-control <%= errors && errors.some(e => e.param === 'inv_year') ? 'is-invalid' : '' %>"
               value="<%= typeof inv_year !== 'undefined' ? inv_year : '' %>"
               required>
      </div>
      
      <!-- Description -->
      <div class="form-group">
        <label for="inv_description">Description*</label>
        <textarea id="inv_description" 
                  name="inv_description" 
                  class="form-control <%= errors && errors.some(e => e.param === 'inv_description') ? 'is-invalid' : '' %>"
                  rows="4" required><%= typeof inv_description !== 'undefined' ? inv_description : '' %></textarea>
      </div>
      
      <!-- Image -->
      <div class="form-group">
        <label for="inv_image">Image URL</label>
        <input type="text" 
               id="inv_image" 
               name="inv_image" 
               class="form-control <%= errors && errors.some(e => e.param === 'inv_image') ? 'is-invalid' : '' %>"
               value="<%= typeof inv_image !== 'undefined' ? inv_image : '' %>"
               placeholder="Leave blank to use default image">
      </div>
      
      <!-- Thumbnail -->
      <div class="form-group">
        <label for="inv_thumbnail">Thumbnail URL</label>
        <input type="text" 
               id="inv_thumbnail" 
               name="inv_thumbnail" 
               class="form-control <%= errors && errors.some(e => e.param === 'inv_thumbnail') ? 'is-invalid' : '' %>"
               value="<%= typeof inv_thumbnail !== 'undefined' ? inv_thumbnail : '' %>"
               placeholder="Leave blank to use default thumbnail">
      </div>
      
      <!-- Price -->
      <div class="form-group">
        <label for="inv_price">Price*</label>
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text">$</span>
          </div>
          <input type="number" 
                 id="inv_price" 
                 name="inv_price" 
                 min="0" 
                 step="0.01"
                 class="form-control <%= errors && errors.some(e => e.param === 'inv_price') ? 'is-invalid' : '' %>"
                 value="<%= typeof inv_price !== 'undefined' ? inv_price : '' %>"
                 required>
        </div>
      </div>
      
      <!-- Miles -->
      <div class="form-group">
        <label for="inv_miles">Miles*</label>
        <input type="number" 
               id="inv_miles" 
               name="inv_miles" 
               min="0"
               class="form-control <%= errors && errors.some(e => e.param === 'inv_miles') ? 'is-invalid' : '' %>"
               value="<%= typeof inv_miles !== 'undefined' ? inv_miles : '' %>"
               required>
      </div>
      
      <!-- Color -->
      <div class="form-group">
        <label for="inv_color">Color*</label>
        <input type="text" 
               id="inv_color" 
               name="inv_color" 
               class="form-control <%= errors && errors.some(e => e.param === 'inv_color') ? 'is-invalid' : '' %>"
               value="<%= typeof inv_color !== 'undefined' ? inv_color : '' %>"
               required>
      </div>
      
      <div class="form-actions">
        <button type="submit" class="btn btn-primary">Add Inventory</button>
        <a href="/inv" class="btn btn-secondary">Cancel</a>
      </div>
    </form>
  </main>

</body>
</html>